<div class="upload-card">
  <div class="card-header">
    <h2 class="card-title">Upload Your Resume</h2>
    <p class="card-subtitle">Get instant AI-powered feedback to improve your CV</p>
  </div>

  <div class="card-body">
    <!-- File upload component -->
    <app-file-upload
      [disabled]="isProcessing()"
      (fileSelected)="onFileSelected($event)"
      (fileRemoved)="onFileRemoved()">
    </app-file-upload>

    <!-- Analyze button -->
    <button
      type="button"
      class="btn btn-primary btn-lg"
      [disabled]="!selectedFile() || isProcessing()"
      (click)="analyzeResume()"
      [attr.aria-busy]="isProcessing()">
      @if (uploadState() === 'uploading') {
        <span class="loading loading-spinner loading-sm"></span>
        <span>Uploading...</span>
      } @else {
        <svg class="icon-analyze" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
        </svg>
        <span>Upload & Analyze</span>
      }
    </button>

    <!-- Progress status -->
    @if (uploadState() === 'uploading') {
      <div class="status-message" role="status" aria-live="polite">
        <span>Uploading your resume... You'll be redirected to the analysis page.</span>
      </div>
    }

    <!-- Error message -->
    @if (errorMessage()) {
      <div class="alert alert-error" role="alert">
        <svg class="icon-alert" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div>
          <strong>Analysis failed</strong>
          <p>{{ errorMessage() }}</p>
        </div>
      </div>
    }
  </div>
</div>
